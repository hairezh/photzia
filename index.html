<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Photzia</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img id="appIcon" class="appicon" alt="Photzia icon"
        src="https://i.pinimg.com/1200x/46/22/a5/4622a5352569a33762c60f091485936b.jpg" />
      <div class="brandtext">
        <strong>Photzia</strong>
        <span class="muted">v6</span>
      </div>
    </div>

    <div class="topbar-actions">
      <button id="btnNewLayer" class="btn">+ Layer</button>

      <label class="btn filebtn" title="Importar imagem como layer">
        Importar
        <input id="fileImportImage" type="file" accept="image/*" hidden />
      </label>

      <button id="btnSaveProject" class="btn ghost">Salvar projeto</button>
      <label class="btn filebtn ghost" title="Abrir projeto Photzia">
        Abrir projeto
        <input id="fileOpenProject" type="file" accept=".json,application/json" hidden />
      </label>

      <div class="sep"></div>

      <button id="btnUndo" class="btn ghost" title="Ctrl+Z">‚Ü∂</button>
      <button id="btnRedo" class="btn ghost" title="Ctrl+Y / Ctrl+Shift+Z">‚Ü∑</button>

      <div class="sep"></div>

      <!-- Export com op√ß√µes -->
      <div class="exportwrap">
        <button id="btnExport" class="btn">Exportar</button>
        <select id="exportType" class="select compact" title="Formato">
          <option value="png">PNG</option>
          <option value="jpeg">JPG</option>
          <option value="webp">WebP</option>
        </select>
        <label class="row tight" title="Qualidade (JPG/WebP)">
          <input id="exportQuality" type="range" min="40" max="100" value="92" />
          <span id="exportQualityLabel" class="pill">92%</span>
        </label>
      </div>

      <div class="sep"></div>

      <label class="row tight">
        <span class="muted">Zoom</span>
        <input id="zoom" type="range" min="25" max="400" value="100" />
        <span id="zoomLabel" class="pill">100%</span>
      </label>

      <div class="sep"></div>

      <button id="btnTheme" class="btn">Apar√™ncia</button>
    </div>
  </header>

  <main class="layout">
    <!-- Barra lateral de menus -->
    <aside class="menubar" id="menubar">
      <button class="mitem active" data-menu="file" title="File">
        <span class="mico">üìÑ</span><span class="mlabel">File</span>
      </button>
      <button class="mitem" data-menu="edit" title="Edit">
        <span class="mico">‚úèÔ∏è</span><span class="mlabel">Edit</span>
      </button>
      <button class="mitem" data-menu="image" title="Image">
        <span class="mico">üñºÔ∏è</span><span class="mlabel">Image</span>
      </button>
      <button class="mitem" data-menu="layer" title="Layer">
        <span class="mico">üß±</span><span class="mlabel">Layer</span>
      </button>
      <button class="mitem" data-menu="select" title="Select">
        <span class="mico">‚ñ≠</span><span class="mlabel">Select</span>
      </button>
      <button class="mitem" data-menu="filter" title="Filter">
        <span class="mico">‚ú®</span><span class="mlabel">Filter</span>
      </button>
      <button class="mitem" data-menu="view" title="View">
        <span class="mico">üîç</span><span class="mlabel">View</span>
      </button>
      <button class="mitem" data-menu="window" title="Window">
        <span class="mico">ü™ü</span><span class="mlabel">Window</span>
      </button>
      <button class="mitem" data-menu="help" title="Help">
        <span class="mico">‚ùì</span><span class="mlabel">Help</span>
      </button>
    </aside>

    <!-- Flyout -->
    <div class="menuflyout" id="menuFlyout" hidden>
      <div class="menuflyout-header">
        <strong id="menuTitle">Menu</strong>
        <button class="btn ghost" id="btnCloseFlyout">‚úï</button>
      </div>
      <div class="menuflyout-body" id="menuBody"></div>
    </div>

    <aside class="panel left">
      <h3>Ferramentas</h3>

      <div class="toolgrid" id="toolgrid">
        <button class="tool active" data-tool="brush" title="Pincel (B)">üñåÔ∏è</button>
        <button class="tool" data-tool="eraser" title="Borracha (E)">üßΩ</button>
        <button class="tool" data-tool="move" title="Mover layer (V)">üß≤</button>
        <button class="tool" data-tool="select" title="Sele√ß√£o/Transform (M)">‚ñ≠</button>
      </div>

      <div class="section">
        <h4>Brush</h4>
        <label class="row">
          <span class="muted">Tamanho</span>
          <input id="size" type="range" min="1" max="120" value="12" />
          <span id="sizeLabel" class="pill">12</span>
        </label>

        <label class="row">
          <span class="muted">Cor</span>
          <input id="color" type="color" value="#ffffff" />
        </label>

        <label class="row">
          <span class="muted">Opacidade</span>
          <input id="opacity" type="range" min="1" max="100" value="100" />
          <span id="opacityLabel" class="pill">100%</span>
        </label>
      </div>

      <div class="section">
        <h4>Sele√ß√£o & Transform</h4>
        <div class="kbdlist muted">
          <div><span class="kbd">M</span> sele√ß√£o retangular</div>
          <div><span class="kbd">arrastar</span> mover</div>
          <div><span class="kbd">cantos</span> resize</div>
          <div><span class="kbd">bolinha</span> rotacionar</div>
          <div><span class="kbd">Shift</span> snap 15¬∞</div>
          <div><span class="kbd">Enter</span> aplicar</div>
          <div><span class="kbd">Esc</span> cancelar</div>
          <div><span class="kbd">Ctrl</span>+<span class="kbd">C/X/V</span> copiar/recortar/colar</div>
        </div>
      </div>
    </aside>

    <section class="stage-wrap">
      <div class="stage" id="stage">
        <div class="stage-badge muted">Canvas</div>
        <canvas id="view" width="1280" height="720"></canvas>
      </div>
    </section>

    <aside class="panel right">
      <h3>Camadas</h3>
      <div class="layers" id="layers"></div>

      <div class="section">
        <h4>Camada ativa</h4>

        <div id="noActiveLayer" class="muted">Nenhuma camada selecionada.</div>

        <div id="activeLayerProps" hidden>
          <label class="row">
            <span class="muted">Nome</span>
            <input id="layerName" class="input" />
          </label>

          <label class="row">
            <span class="muted">Opacidade</span>
            <input id="layerOpacity" type="range" min="0" max="100" value="100" />
            <span id="layerOpacityLabel" class="pill">100%</span>
          </label>

          <label class="row">
            <span class="muted">Blend</span>
            <select id="layerBlend" class="select">
              <option value="source-over">Normal</option>
              <option value="multiply">Multiply</option>
              <option value="screen">Screen</option>
              <option value="overlay">Overlay</option>
              <option value="darken">Darken</option>
              <option value="lighten">Lighten</option>
            </select>
          </label>

          <div class="row gap">
            <button id="btnClearLayer" class="btn ghost">Limpar</button>
            <button id="btnDeleteLayer" class="btn ghost danger">Deletar</button>
          </div>
        </div>
      </div>

      <div class="section">
        <h4>Sele√ß√£o</h4>
        <div id="selEmpty" class="muted">Nenhuma sele√ß√£o ativa.</div>

        <div id="selProps" hidden>
          <div class="row">
            <span class="muted">W√óH</span>
            <span id="selWH" class="pill">0√ó0</span>
          </div>
          <div class="row">
            <span class="muted">X,Y</span>
            <span id="selXY" class="pill">0,0</span>
          </div>
          <div class="row">
            <span class="muted">Rot</span>
            <span id="selRot" class="pill">0¬∞</span>
          </div>

          <div class="row gap">
            <button id="btnSelCommit" class="btn">Aplicar</button>
            <button id="btnSelCancel" class="btn ghost">Cancelar</button>
          </div>

          <div class="row gap">
            <button id="btnSelCopy" class="btn ghost">Copiar</button>
            <button id="btnSelCut" class="btn ghost">Recortar</button>
            <button id="btnSelPaste" class="btn ghost">Colar</button>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <!-- Modal Apar√™ncia -->
  <div class="modal-backdrop" id="themeModalBackdrop" hidden></div>
  <div class="modal" id="themeModal" hidden>
    <div class="modal-header">
      <strong>Apar√™ncia do Photzia</strong>
      <button class="btn ghost" id="btnCloseTheme">‚úï</button>
    </div>

    <div class="modal-body">
      <p class="muted">Tudo vira <code>CSS variables</code>. Background por link ou upload.</p>

      <div class="section">
        <h4>Cores</h4>
        <div class="themegrid">
          <label><span>Fundo</span><input type="color" id="t_bg" /></label>
          <label><span>Pain√©is</span><input type="color" id="t_panel" /></label>
          <label><span>Texto</span><input type="color" id="t_text" /></label>
          <label><span>Destaque</span><input type="color" id="t_accent" /></label>
          <label><span>Borda</span><input type="color" id="t_border" /></label>
          <label><span>Canvas</span><input type="color" id="t_canvas" /></label>
        </div>
      </div>

      <div class="section">
        <h4>Material / Glass</h4>
        <label class="row">
          <span class="muted">Blur (0‚Äì24px)</span>
          <input id="t_blur" type="range" min="0" max="24" value="10" />
          <span id="t_blurLabel" class="pill">10px</span>
        </label>

        <label class="row">
          <span class="muted">Transp. Pain√©is</span>
          <input id="t_panelAlpha" type="range" min="10" max="100" value="92" />
          <span id="t_panelAlphaLabel" class="pill">92%</span>
        </label>

        <label class="row">
          <span class="muted">Transp. Topbar</span>
          <input id="t_topbarAlpha" type="range" min="10" max="100" value="78" />
          <span id="t_topbarAlphaLabel" class="pill">78%</span>
        </label>
      </div>

      <div class="section">
        <h4>Background (PNG por link ou upload)</h4>
        <label class="row">
          <span class="muted">URL</span>
          <input id="t_bgImageUrl" class="input" placeholder="https://.../fundo.png" />
        </label>

        <div class="row gap">
          <label class="btn filebtn ghost">
            Upload
            <input id="t_bgImageUpload" type="file" accept="image/*" hidden />
          </label>
          <button id="btnBgClear" class="btn ghost">Remover</button>
        </div>

        <label class="row">
          <span class="muted">Opacidade</span>
          <input id="t_bgImageAlpha" type="range" min="0" max="100" value="35" />
          <span id="t_bgImageAlphaLabel" class="pill">35%</span>
        </label>

        <label class="row">
          <span class="muted">Modo</span>
          <select id="t_bgImageFit" class="select">
            <option value="cover">Cover</option>
            <option value="contain">Contain</option>
            <option value="auto">Auto</option>
          </select>
        </label>

        <label class="row">
          <span class="muted">Posi√ß√£o</span>
          <select id="t_bgImagePos" class="select">
            <option value="center center">Centro</option>
            <option value="top center">Topo</option>
            <option value="bottom center">Baixo</option>
            <option value="center left">Esquerda</option>
            <option value="center right">Direita</option>
          </select>
        </label>
      </div>

      <div class="section">
        <h4>√çcone do app</h4>
        <label class="row">
          <span class="muted">URL</span>
          <input id="t_iconUrl" class="input" placeholder="https://..." />
        </label>
        <div class="row gap">
          <label class="btn filebtn ghost">
            Upload
            <input id="t_iconUpload" type="file" accept="image/*" hidden />
          </label>
          <button id="btnIconReset" class="btn ghost">Padr√£o</button>
        </div>
      </div>

      <div class="section">
        <h4>Presets</h4>
        <div class="row gap">
          <input id="themeName" class="input" placeholder="nome do preset" />
          <button id="btnSaveTheme" class="btn">Salvar</button>
          <button id="btnResetTheme" class="btn ghost">Reset</button>
        </div>

        <div class="section">
          <h4>Presets salvos</h4>
          <div id="themePresets" class="presetlist"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" hidden></div>

  <script src="app.js"></script>
</body>
</html>
